---
title: "Simulate movement (possibly from iSSFs)"
author: "Johannes Signer"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Simulate movement (possibly from iSSFs)}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include=FALSE}
library(knitr)
knitr::opts_chunk$set(message = FALSE, warning = FALSE, cache = TRUE)
```




## Background and setup

```{r}
library(raster)
library(devtools)
library(amt)
library(ggplot2)
library(lubridate)
set.seed(123)
```



The aim of this document is to illustrate how one can simulate animal movement, with parameters estimated from an integrated Step Selection Function (iSSF).

I will use a dummy landscape with a large forest patch in the middle.

```{r}
r <- raster(xmn = 0, xmx = 100, ymn = 0, ymx = 100, res = 1)
r[] <- 0
r[25:75, 25:75] <- 1
raster::plot(r)
names(r) <- c("forest")
```


## Simulations

 The function to simulate movement is called `simulate_movement`. The most imporant arguments of `simulate_movement` are:

 - `habitat_kernel`: speciefies how habitat selection takes place
 - `movement_kernel`: specifies the movement of the animal.
 - `map`: a raster (stack) of resources.
 - `fun`: a function that is executed at each time step to calculate derived quantities, such as extracting the habitat at the current position or the determines the whether a step is during day or night. `fun` can be specified by the user. This makes it very flexible.

### Habitat kernel
 to come

### Movement kernel

 A movement kernel consists of two components: the step-length distribution and the turn-angle distribution. Both distribution need to be specified in terms of `amt`-distributions. This is just an object oriented wrapper around the standard R distributions. For example for an exponential distribution we can use



more to come

## Examples

### Random walk


### Selection for forest



### Different movement speed inside and outside forest


## Real data example
to come


## Session

```{r}
sessioninfo::session_info()
```

